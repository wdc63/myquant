# MyQuant UI/UX 设计文档

## 1. 简介

本文档旨在为 MyQuant 量化交易平台提供一个全面、详细的 UI/UX 设计指南。MyQuant 平台基于 QTrader 框架，为用户提供专业的量化策略回测与模拟交易环境。一个清晰、一致且用户友好的界面对于提升用户体验、提高策略开发效率至关重要。

本指南将涵盖设计理念、视觉风格（颜色、字体）、布局系统、响应式设计以及核心组件的详细设计规范。

---

## 2. 设计理念与原则

MyQuant 的 UI/UX 设计遵循以下核心原则：

*   **信息清晰 (Clarity)**：界面布局和信息层级清晰明了，帮助用户快速定位核心信息，如图表、关键指标和日志。
*   **高效操作 (Efficiency)**：优化工作流程，减少不必要的操作步骤。例如，策略编辑器中的代码自动保存、一键启动回测/模拟等功能。
*   **专业可信 (Professionalism)**：采用现代、简洁的设计风格，通过专业的数据可视化和一致的视觉语言，建立用户对平台的信任感。
*   **专注内容 (Focus)**：UI 元素应服务于内容，避免不必要的装饰。代码编辑器、图表和数据表格等核心内容区域拥有最高的视觉优先级。
*   **适应性 (Adaptability)**：界面能够适应不同尺寸的设备（响应式设计），并提供深色/浅色两种主题模式，以满足不同用户在不同环境下的使用偏好。

---

## 3. 视觉风格

### 3.1 色彩系统

MyQuant 的色彩系统分为浅色 (Light Mode) 和深色 (Dark Mode) 两套主题，用户可以随时切换。所有颜色都通过 CSS 自定义属性（变量）进行管理，方便维护和扩展。

#### 3.1.1 浅色主题 (Light Mode)

| 颜色用途 | 颜色值 | CSS 变量 | 描述 |
| :--- | :--- | :--- | :--- |
| **主色调** | `#3b82f6` | `--primary-color` | 用于关键操作按钮、Logo、激活状态的标签和图表线条。 |
| **背景色** | `#f8fafc` | `--bg-primary` | 页面的主要背景色，提供干净、明亮的视觉感受。 |
| **卡片/容器背景** | `#ffffff` | `--card-bg` | 卡片、对话框、表格等容器的背景色。 |
| **主要文本** | `#1a1d23` | `--text-primary` | 正文、标题等主要文字颜色。 |
| **次要文本** | `#64748b` | `--header-info-color` | 辅助信息、标签、占位符等文本颜色。 |
| **边框/分割线** | `#e2e8f0` | `--border-color` | 卡片边框、分割线、表格边框的颜色。 |
| **正向/上涨** | `#ef4444` | `--positive-color` | 用于表示收益、买入等积极状态（符合国内股市习惯）。 |
| **负向/下跌** | `#10b981` | `--negative-color` | 用于表示亏损、卖出等消极状态（符合国内股市习惯）。 |

#### 3.1.2 深色主题 (Dark Mode)

| 颜色用途 | 颜色值 | CSS 变量 | 描述 |
| :--- | :--- | :--- | :--- |
| **主色调** | `#3b82f6` | `--primary-color` | 与浅色模式保持一致，确保品牌识别度。 |
| **背景色** | `#1a1d23` | `--bg-primary` | 页面的主要背景色，营造专注、沉浸的氛围。 |
| **卡片/容器背景** | `#242830` | `--card-bg` | 卡片、对话框、表格等容器的背景色。 |
| **主要文本** | `#e4e6eb` | `--text-primary` | 正文、标题等主要文字颜色。 |
| **次要文本** | `#94a3b8` | `--header-info-color` | 辅助信息、标签、占位符等文本颜色。 |
| **边框/分割线** | `#3d4451` | `--border-color` | 卡片边框、分割线、表格边框的颜色。 |
| **正向/上涨** | `#ef4444` | `--positive-color` | 与浅色模式保持一致。 |
| **负向/下跌** | `#10b981` | `--negative-color` | 与浅色模式保持一致。 |

### 3.2 字体系统

*   **主字体**：优先使用系统默认的无衬线字体，以保证在不同操作系统上的最佳原生体验。
    *   CSS: `font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;`
*   **代码字体**：在代码编辑器和日志显示区域，使用等宽字体，以保证代码对齐和可读性。
    *   CSS: `font-family: 'Consolas', 'Courier New', monospace;`
*   **字号层级**：
    *   **主标题 (H1)**: `22px` (例如：“策略工作台”)
    *   **次标题 (H2)**: `16px` (例如：卡片标题、区域标题)
    *   **正文/表格**: `14px`
    *   **辅助信息**: `13px` (例如：表头、次要描述)
    *   **更小的文本**: `12px` (例如：日志时间戳)

---

## 4. 布局与响应式设计

MyQuant 采用灵活的响应式布局，确保在桌面、平板和手机等不同设备上都能提供良好的用户体验。

### 4.1 整体布局 (`MainLayout.vue`)

*   **结构**：采用经典的“页眉-内容区”布局。
    *   **页眉 (Header)**：高度固定为 `60px`，包含 Logo、主导航、主题切换和退出登录按钮。在视觉上与内容区分离，始终保持在页面顶部。
    *   **内容区 (Main Content)**：占据剩余的屏幕空间，并提供垂直滚动条。
*   **响应式行为**：
    *   **桌面端 (`> 768px`)**：显示水平的主导航菜单。
    *   **移动端 (`<= 768px`)**：主导航菜单被折叠到一个汉堡菜单 (Hamburger Menu) 中。点击汉堡菜单按钮，会从顶部滑出一个覆盖全屏的移动端专用导航菜单。

### 4.2 网格系统

*   **策略仪表盘**：采用响应式网格布局 (`el-row` / `el-col`) 展示策略卡片。
    *   **桌面端**：根据屏幕宽度，每行显示 2-4 张卡片。
    *   **移动端**：网格系统折叠为单列，每行只显示一张卡片。
*   **指标展示**：在监控和报告页面，核心指标采用 `display: grid` 布局，可以根据容器宽度自动调整列数 (`repeat(auto-fill, minmax(180px, 1fr))`)。

### 4.3 核心页面布局

*   **策略编辑器 (`StrategyEditor.vue`)**：
    *   **桌面端**：采用双栏布局，左侧为代码编辑区 (60%)，右侧为运行管理区 (40%)。这种布局允许用户同时编写代码和查看运行历史，符合核心工作流程。
    *   **移动端**：双栏布局转变为垂直堆叠布局，代码编辑器在上，运行管理在下。每个区域占据独立的垂直空间，用户可以通过滚动查看。

---

## 5. 核心组件 UI/UX 设计详解

### 5.1 主页 (`Home.vue`)

*   **目标**：吸引用户，快速介绍平台的核心价值和功能。
*   **UI 设计**：
    *   **英雄区 (Hero Section)**：巨大的标题、醒目的 Logo 和清晰的价值主张 (“专业量化回测平台”)。背景中动态的 K 线图和浮动的数据卡片营造了专业、动态的氛围。
    *   **号召性用语 (CTA)**：提供“创建策略”和“查看文档”两个主次分明的按钮，引导用户进行下一步操作。
    *   **功能展示**：使用图标和简洁的文字，网格化地展示平台的核心功能，一目了然。
    *   **技术栈**：以标签云的形式展示所用技术，增强专业性和透明度。

### 5.2 策略工作台 (`StrategiesDashboard.vue`)

*   **目标**：为用户提供一个清晰、高效的策略管理界面。
*   **UI 设计**：
    *   **头部操作区**：左侧为页面标题，右侧为醒目的“创建新策略”按钮，操作路径清晰。
    *   **策略卡片**：
        *   每张卡片代表一个策略，信息简洁，只包含策略名称和创建时间。
        *   卡片右上角提供了一个删除按钮，点击后会弹出二次确认对话框，防止误操作。
        *   整张卡片可点击，鼠标悬浮时有明显的视觉反馈（边框变色、轻微上浮），引导用户点击进入策略编辑器。
    *   **空状态**：当用户没有任何策略时，会显示一个友好的空状态提示，引导用户创建第一个策略。

### 5.3 策略编辑器 (`StrategyEditor.vue`)

*   **目标**：提供一个功能强大、无干扰的代码编辑和策略运行管理环境。
*   **UI 设计**：
    *   **代码编辑区**：
        *   使用标签页 (`el-tabs`) 在 `strategy.py`, `config.yaml`, `stock_api_provider.py` 三个核心文件间切换。
        *   集成了 Monaco Editor，提供语法高亮、代码提示等专业功能。
        *   编辑器主题能自动跟随应用的深/浅色模式切换。
        *   提供手动保存（按钮和 `Ctrl+S` 快捷键）和延时自动保存功能，确保用户代码不会丢失。
    *   **运行管理区 (`RunManagement.vue`)**：
        *   顶部提供“启动回测”和“启动模拟”两个核心操作按钮。
        *   下方使用标签页区分“历史回测”和“历史模拟”的运行列表。
        *   列表 (`RunList.vue`) 以表格形式展示，包含时间、状态、最终收益和备注等关键信息。
        *   **状态标签**：使用不同颜色的标签（`el-tag`）清晰地标识运行状态（运行中、已暂停、已完成等）。
        *   **内联编辑**：用户可以直接双击“备注”单元格进行编辑，操作便捷。
        *   **操作列**：提供“查看”、“下载工作区”和“删除”等操作，并配有清晰的图标。
        *   **实时更新**：通过 WebSocket 实时更新运行列表的状态，无需用户手动刷新。

### 5.4 运行详情页 (`RunDetails.vue`)

此页面根据策略的运行状态，动态加载两个核心视图之一：`MonitoringView.vue` (实时监控) 或 `ReportView.vue` (静态报告)。

#### 5.4.1 实时监控视图 (`MonitoringView.vue`)

*   **目标**：在策略运行时，提供一个信息丰富、实时更新的数据监控仪表盘。
*   **UI 设计**：
    *   **布局**：采用标签页布局，将海量信息分门别类地组织在“概览”、“性能分析”、“每日持仓”、“订单流水”、“运行日志”和“代码快照”六个标签页中。
    *   **数据可视化**：
        *   **核心指标**：以卡片网格的形式展示，关键财务数据（如收益率）会根据正负使用红绿色进行高亮。
        *   **收益曲线**：使用 ECharts 绘制专业的收益曲线图，并提供“历史收益”和“当日收益”两个子标签页进行切换。图表支持缩放和详细的 Tooltip 信息。
    *   **表格数据**：所有表格（持仓、订单等）都支持分页，并具有与应用整体风格一致的深/浅色模式样式。
    *   **实时日志**：日志视图会模拟终端的显示效果，不同级别的日志有不同的颜色，并且会自动滚动到最新的日志条目。
    *   **代码快照**：以只读模式展示本次运行的代码，方便用户随时回溯和检查，并提供一键复制功能。
    *   **交互反馈**：
        *   当策略运行出错时，页面顶部会出现一个醒目的错误横幅，引导用户查看日志。
        *   提供“暂停/继续/停止”的实时控制按钮。

#### 5.4.2 回测报告视图 (`ReportView.vue`)

*   **目标**：在运行结束后，展示一份专业、详细、且与 MyQuant 整体风格一致的回测报告。
*   **UI 设计**：
    *   **无缝集成**：通过 `<iframe>` 嵌入由后端 QTrader 生成的静态 HTML 报告。
    *   **样式注入**：通过 JavaScript 动态向 `<iframe>` 内部注入 CSS 样式，以覆盖报告的原生样式。这使得报告的背景、字体、表格、图表等视觉元素能够完美匹配 MyQuant 的深/浅色主题。
    *   **主题同步**：通过 `MutationObserver` 监听主应用的主题变化，并自动触发 `<iframe>` 内部的相应主题切换逻辑，保证了父子页面主题的高度一致性。
    *   **体验优化**：自动调整 `<iframe>` 高度以消除内部滚动条，并美化了代码快照区域的滚动条样式。

---

## 6. 总结与展望

MyQuant 平台的 UI/UX 设计旨在为量化策略开发者提供一个专业、高效且愉悦的工作环境。通过统一的设计语言、强大的数据可视化、流畅的交互体验和全面的响应式设计，平台在功能性和易用性之间取得了良好的平衡。

未来的改进方向可以包括：

*   **组件库标准化**：将可复用的 UI 元素抽象成更通用的组件。
*   **可访问性 (Accessibility)**：进一步优化，确保所有用户（包括使用辅助技术的用户）都能无障碍地使用平台。
*   **微交互与动效**：在适当的地方增加一些微妙的过渡和动画效果，提升操作的流畅感和愉悦感。
